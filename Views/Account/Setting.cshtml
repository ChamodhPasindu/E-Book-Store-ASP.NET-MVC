@model EBookStore.Models.DTO.UserSettingsViewModel

<h2 class="text-center text-uppercase display-6 fw-bold">Settings</h2>

@if (TempData["SuccessMessage"] != null)
{
	<div class="alert alert-success alert-dismissible fade show" role="alert">
		@TempData["SuccessMessage"]
		<button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
	</div>
}

@if (TempData["ErrorMessage"] != null)
{
	<div class="alert  alert-danger alert-dismissible fade show" role="alert">
		@TempData["ErrorMessage"]
		<button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
	</div>
}

<div class="text-center mb-4">
	<img src="@Url.Content("~/images/user.png")"
		 alt="User Profile Image"
		 class="img-thumbnail rounded-circle"
		 style="width: 100px; height: 100px;" />
</div>

<div class="container">
	<div class="row d-flex">
		<div class="col-md-6 mb-4">
			<!-- Card for updating user details -->
			<div class="card shadow-sm" style="height: 100%;">
				<div class="card-header">
					<h5 class="mb-0">Update Details</h5>
				</div>
				<div class="card-body">
					<form asp-action="UpdateDetails" method="post">
						<input type="hidden" asp-for="UserID" value="@Context.Session.GetString("UserID")" />

						<div class="form-group">
							<label asp-for="FirstName" class="form-label">First Name</label>
							<input asp-for="FirstName" class="form-control" value="@Context.Session.GetString("FirstName")" required />
						</div>

						<div class="form-group mt-2">
							<label asp-for="LastName" class="form-label">Last Name</label>
							<input asp-for="LastName" class="form-control" value="@Context.Session.GetString("LastName")" required />
						</div>

						<div class="form-group mt-2">
							<label asp-for="Email" class="form-label">Email</label>
							<input asp-for="Email" class="form-control" type="email" value="@Context.Session.GetString("Email")" required />
						</div>

						<div class="form-group mt-2">
							<label asp-for="Address" class="form-label">Address</label>
							<input asp-for="Address" value="@Context.Session.GetString("Address")" class="form-control" />
						</div>

						<button type="submit" class="btn btn-outline-primary mt-3">Update Details</button>
					</form>
				</div>
			</div>
		</div>

		<div class="col-md-6 mb-4">
			<!-- Card for updating password -->
			<div class="card shadow-sm" style="height: 100%;">
				<div class="card-header">
					<h5 class="mb-0">Update Password</h5>
				</div>
				<div class="card-body">
					<form asp-action="ChangePassword" method="post">
						<div class="form-group">
							<label for="CurrentPassword" class="form-label">Current Password</label>
							<input type="password" id="CurrentPassword" name="CurrentPassword" class="form-control" required />
						</div>

						<div class="form-group mt-2">
							<label for="NewPassword" class="form-label">New Password</label>
							<input type="password" id="NewPassword" name="NewPassword" class="form-control" required />
						</div>

						<button type="submit" class="btn btn-outline-primary mt-3">Update Password</button>
					</form>
				</div>
			</div>
		</div>
	</div>

	@if (Context.Session.GetString("Role") == "Admin")
	{
		<div class="row d-flex">
			<div class="col-md-12">
				<h2 class="text-center fw-bold mb-4">Create New Admin Account</h2>

				<form asp-action="RegisterAdmin" method="post" class="p-4 shadow rounded border">

					<div class="row">
						<div class="col-md-6">
							<!-- First Name -->
							<div class="mb-3">
								<label for="FirstName" class="form-label">First Name</label>
								<div class="input-group">
									<span class="input-group-text"><i class="bi-person"></i></span>
									<input type="text" class="form-control" id="FirstName" name="FirstName" placeholder="Enter your first name" required />
								</div>
							</div>

							<!-- Last Name -->
							<div class="mb-3">
								<label for="LastName" class="form-label">Last Name</label>
								<div class="input-group">
									<span class="input-group-text"><i class="bi-person"></i></span>
									<input type="text" class="form-control" id="LastName" name="LastName" placeholder="Enter your last name" required />
								</div>
							</div>

							<!-- Phone Number -->
							<div class="mb-3">
								<label for="PhoneNumber" class="form-label">Phone Number</label>
								<div class="input-group">
									<span class="input-group-text"><i class="bi-telephone"></i></span>
									<input type="text" class="form-control" id="PhoneNumber" name="PhoneNumber" placeholder="Enter your phone number" required />
								</div>
							</div>
						</div>

						<div class="col-md-6">
							<!-- Email -->
							<div class="mb-3">
								<label for="Email" class="form-label">Email</label>
								<div class="input-group">
									<span class="input-group-text"><i class="bi-envelope"></i></span>
									<input type="email" class="form-control" id="Email" name="Email" placeholder="Enter your email" required />
								</div>
							</div>

							<!-- Address -->
							<div class="mb-3">
								<label for="Address" class="form-label">Address</label>
								<div class="input-group">
									<span class="input-group-text"><i class="bi-geo-alt"></i></span>
									<input class="form-control" id="Address" name="Address" placeholder="Enter your address" required></input>
								</div>
							</div>


							<!-- Password -->
							<div class="mb-3">
								<label for="Password" class="form-label">Password</label>
								<div class="input-group">
									<span class="input-group-text"><i class="bi-lock"></i></span>
									<input type="password" class="form-control" id="Password" name="Password" placeholder="Enter your password" required />
								</div>
							</div>
						</div>
					</div>

					<div class="d-grid mt-4">
						<button type="submit" class="btn btn-outline-success btn-lg">
							<i class="fas fa-user-plus"></i> Register
						</button>
					</div>
				</form>
			</div>
		</div>
	}
</div>
